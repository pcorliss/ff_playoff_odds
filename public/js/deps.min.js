!function c(i,o,a){function h(e,t){if(!o[e]){if(!i[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(u)return u(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var s=o[e]={exports:{}};i[e][0].call(s.exports,function(t){var r=i[e][1][t];return h(r||t)},s,s.exports,c,i,o,a)}return o[e].exports}for(var u="function"==typeof require&&require,t=0;t<a.length;t++)h(a[t]);return h}({1:[function(t,r,e){!function(t){var o=function(t){var r=Math.abs(t),e=1/(1+r/2),n=e*Math.exp(-r*r-1.26551223+e*(1.00002368+e*(.37409196+e*(.09678418+e*(e*(.27886807+e*(e*(1.48851587+e*(.17087277*e-.82215223))-1.13520398))-.18628806)))));return 0<=t?n:2-n},r=function(t){if(2<=t)return-100;if(t<=0)return 100;for(var r=t<1?t:2-t,e=Math.sqrt(-2*Math.log(r/2)),n=-.70711*((2.30753+.27061*e)/(1+e*(.99229+.04481*e))-e),s=0;s<2;s++){var i=o(n)-r;n+=i/(1.1283791670955126*Math.exp(-n*n)-n*i)}return t<1?n:-n},e=function(t,r){if(r<=0)throw new Error("Variance must be > 0 (but was "+r+")");this.mean=t,this.variance=r,this.standardDeviation=Math.sqrt(r)};e.prototype.pdf=function(t){var r=this.standardDeviation*Math.sqrt(2*Math.PI);return Math.exp(-Math.pow(t-this.mean,2)/(2*this.variance))/r},e.prototype.cdf=function(t){return.5*o(-(t-this.mean)/(this.standardDeviation*Math.sqrt(2)))},e.prototype.ppf=function(t){return this.mean-this.standardDeviation*Math.sqrt(2)*r(2*t)},e.prototype.mul=function(t){if("number"==typeof t)return this.scale(t);var r=1/this.variance,e=1/t.variance;return s(r+e,r*this.mean+e*t.mean)},e.prototype.div=function(t){if("number"==typeof t)return this.scale(1/t);var r=1/this.variance,e=1/t.variance;return s(r-e,r*this.mean-e*t.mean)},e.prototype.add=function(t){return n(this.mean+t.mean,this.variance+t.variance)},e.prototype.sub=function(t){return n(this.mean-t.mean,this.variance+t.variance)},e.prototype.scale=function(t){return n(this.mean*t,this.variance*t*t)};var n=function(t,r){return new e(t,r)},s=function(t,r){return n(r/t,1/t)};t(n)}(void 0!==e?function(t){r.exports=t}:function(t){this.gaussian=t})},{}],2:[function(t){Array.prototype.stanDeviate=function(){var t,r=[];for(t=0;t<this.length;t+=1)r.push(Math.pow(this[t]-this.mean(),2));return Math.sqrt(r.reduce(function(t,r){return t+r})/this.length)},Array.prototype.mean=function(){return this.sum()/this.length},Array.prototype.median=function(){var t=this.sort(function(t,r){return t-r});if(0===t.length)return 0;var r=Math.floor(t.length/2);return t.length%2?t[r]:(t[r-1]+t[r])/2},Array.prototype.sum=function(){var t,r=0;for(t=0;t<this.length;t+=1)this[t]&&(r+=Number(this[t]));return r},Array.prototype.shuffle=function(){for(var t,r,e=this.length;0!==e;)r=Math.floor(Math.random()*e),t=this[e-=1],this[e]=this[r],this[r]=t;return this},Number.prototype.round=function(t){return Math.round(this*Math.pow(10,t))/Math.pow(10,t)},window.gaussian=t("gaussian"),window.Team=t("./team.js"),window.Match=t("./match.js"),window.Ranker=t("./ranker.js")},{"./match.js":3,"./ranker.js":4,"./team.js":5,gaussian:1}],3:[function(t,r){function o(t,r,e,n,s,i){this.week=t,this.a_team=r,this.b_team=e,this.a_points=Number(n),this.b_points=Number(s),this.status=i,this.computed=this.incomplete()}o.from_json=function(t,r){var e=r.week,n=Team.find_or_create(t,r.teams.team[0]),s=Team.find_or_create(t,r.teams.team[1]),i=new o(e,n,s,r.teams.team[0].team_points.total,r.teams.team[1].team_points.total,r.status);return n.matches[n.matches.length]=i,s.matches[s.matches.length]=i},o.prototype.complete=function(){return"postevent"===this.status},o.prototype.incomplete=function(){return!this.complete()},r.exports=o},{}],4:[function(t,r){function e(t,r){this.teams=[],this.load(r),this.iterations=0,this.iterate(t),this.h2h=!1}e.prototype.iterate=function(t){this.iterations+=t;for(var r=0;r<t;r++)this.compute(),this.standings(),this.reset()},e.prototype.load=function(t){for(var r in t)if(t[r])for(var e=t[r],n=0;n<e.length;n++)"0"===e[n].is_playoffs&&new Match.from_json(this.teams,e[n]);return this.teams},e.prototype.compute=function(){for(var t=1;t<this.teams.length;t++){var r=this.teams[t];if(r)for(var e=0;e<r.matches.length;e++){var n=r.matches[e];n.computed&&(n.a_team.id===r.id?n.a_points=r.fake_score():n.b_points=r.fake_score())}}},e.prototype.reset=function(){for(var t=1;t<this.teams.length;t++)this.teams[t]&&this.teams[t].reset()},e.prototype.standings=function(){var t=this.teams.slice(1),r=this.h2h?Team.headComparator:Team.comparator;t.sort(r);for(var e=0;e<t.length;e++)t[e]&&(t[e].ranks[e]=t[e].ranks[e]||0,t[e].ranks[e],t[e].ranks[e]+=1)},r.exports=e},{}],5:[function(t,r){function e(t,r,e){this.id=t,this.owner=r,this.name=e,this.matches=[],this.ranks=[],this.record={}}e.find_or_create=function(t,r){return t[r.team_id]||(t[r.team_id]=new e(r.team_id,r.managers.manager.nickname,r.name)),t[r.team_id]},e.prototype.my_score=function(t){return t.a_team.id===this.id?Number(t.a_points):Number(t.b_points)},e.prototype.opp_score=function(t){return t.a_team.id===this.id?Number(t.b_points):Number(t.a_points)},e.prototype.real_scores=function(){var t,r,e,n,s;for(s=[],r=0,e=(n=this.real_matches()).length;r<e;r++)t=n[r],s.push(this.my_score(t));return s},e.prototype.real_matches=function(){var t,r,e,n,s;for(s=[],r=0,e=(n=this.matches).length;r<e;r++)(t=n[r]).computed||s.push(t);return s},e.prototype.fake_matches=function(){var t,r,e,n,s;for(s=[],r=0,e=(n=this.matches).length;r<e;r++)(t=n[r]).computed&&s.push(t);return s},e.prototype.head_matches=function(t){var r,e,n,s,i;for(i=[],e=0,n=(s=this.matches).length;e<n;e++)(r=s[e]).a_team!==t&&r.b_team!==t||i.push(r);return i},e.prototype.calc_stats=function(){this.cached_stats||(this.scores||(this.scores=this.real_scores()),this.mean||(this.mean=this.scores.mean()),this.max||(this.max=Math.max.apply(null,this.scores)),this.min||(this.min=Math.min.apply(null,this.scores)),this.stddev||(this.stddev=this.scores.stanDeviate()),this.stddev||(this.stddev=20),this.distribution||(this.distribution=window.gaussian(this.mean,this.stddev*this.stddev)),this.median||(this.median=this.scores.median()),this.ptsFor||(this.ptsFor=this.points_for(this.real_matches())),this.ptsAgaint||(this.ptsAgainst=this.pointsAgainst(this.real_matches())),this.cached_stats=!0)},e.prototype.fake_score=function(){return this.calc_stats(),this.distribution.ppf(Math.random()).toFixed(2)},e.prototype.ties=function(){return this.records()[2]},e.prototype.losses=function(){return this.records()[1]},e.prototype.wins=function(){return this.records()[0]},e.prototype.real_record=function(){return this.records(this.real_matches(),"real")},e.prototype.real_win_loss=function(){var t=this.real_record();return 0<t[2]?t[0]+"-"+t[1]+"-"+t[2]:t[0]+"-"+t[1]},e.prototype.records=function(t,r){var e,n,s,i,o,a,h,u,c;t=void 0!==t?t:this.matches,r=void 0!==r?r:"default";if(this.record[r])return this.record[r];for(u=o=s=h=0,c=t.length;u<c;u++)i=t[u],e=Number(i.a_points),n=Number(i.b_points),i.a_team.id!==this.id&&(a=e,e=n,n=a),n<e?h+=1:e<n?s+=1:o+=1;return this.record[r]=[h,s,o]},e.prototype.points_for=function(s){var i;s=void 0!==s?s:this.matches;return function(){var t,r,e,n;for(n=[],t=0,r=(e=s).length;t<r;t++)i=e[t],n.push(this.my_score(i));return n}.call(this).reduce(function(t,r){return Number(t+r).round(2)})},e.prototype.pointsAgainst=function(s){var i;s=void 0!==s?s:this.matches;return function(){var t,r,e,n;for(n=[],t=0,r=(e=s).length;t<r;t++)i=e[t],n.push(this.opp_score(i));return n}.call(this).reduce(function(t,r){return Number(t+r).round(2)})},e.prototype.reset=function(){var t=this.fake_matches();this.record={};for(var r=0;r<t.length;r++)t[r].a_points=0,t[r].b_points=0},e.comparator=function(t,r){var e=t.wins()+.5*t.ties(),n=r.wins()+.5*r.ties();return e==n?t.points_for()>r.points_for()?-1:1:n<e?-1:1},e.prototype.h2hRecord=function(t){return this.records(this.head_matches(t),"head")},e.headComparator=function(t,r){var e=t.wins()+.5*t.ties(),n=r.wins()+.5*r.ties();if(e!=n)return n<e?-1:1;var s=t.h2hRecord(r);return games_ahead=s[0]-s[1],0<games_ahead?-1:games_ahead<0?1:t.points_for()>r.points_for()?-1:1},r.exports=e},{}]},{},[2]);