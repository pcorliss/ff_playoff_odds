!function c(i,a,o){function h(r,t){if(!a[r]){if(!i[r]){var e="function"==typeof require&&require;if(!t&&e)return e(r,!0);if(u)return u(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var s=a[r]={exports:{}};i[r][0].call(s.exports,function(t){var e=i[r][1][t];return h(e||t)},s,s.exports,c,i,a,o)}return a[r].exports}for(var u="function"==typeof require&&require,t=0;t<o.length;t++)h(o[t]);return h}({1:[function(t,e,r){!function(t){var a=function(t){var e=Math.abs(t),r=1/(1+e/2),n=r*Math.exp(-e*e-1.26551223+r*(1.00002368+r*(.37409196+r*(.09678418+r*(r*(.27886807+r*(r*(1.48851587+r*(.17087277*r-.82215223))-1.13520398))-.18628806)))));return 0<=t?n:2-n},e=function(t){if(2<=t)return-100;if(t<=0)return 100;for(var e=t<1?t:2-t,r=Math.sqrt(-2*Math.log(e/2)),n=-.70711*((2.30753+.27061*r)/(1+r*(.99229+.04481*r))-r),s=0;s<2;s++){var i=a(n)-e;n+=i/(1.1283791670955126*Math.exp(-n*n)-n*i)}return t<1?n:-n},r=function(t,e){if(e<=0)throw new Error("Variance must be > 0 (but was "+e+")");this.mean=t,this.variance=e,this.standardDeviation=Math.sqrt(e)};r.prototype.pdf=function(t){var e=this.standardDeviation*Math.sqrt(2*Math.PI);return Math.exp(-Math.pow(t-this.mean,2)/(2*this.variance))/e},r.prototype.cdf=function(t){return.5*a(-(t-this.mean)/(this.standardDeviation*Math.sqrt(2)))},r.prototype.ppf=function(t){return this.mean-this.standardDeviation*Math.sqrt(2)*e(2*t)},r.prototype.mul=function(t){if("number"==typeof t)return this.scale(t);var e=1/this.variance,r=1/t.variance;return s(e+r,e*this.mean+r*t.mean)},r.prototype.div=function(t){if("number"==typeof t)return this.scale(1/t);var e=1/this.variance,r=1/t.variance;return s(e-r,e*this.mean-r*t.mean)},r.prototype.add=function(t){return n(this.mean+t.mean,this.variance+t.variance)},r.prototype.sub=function(t){return n(this.mean-t.mean,this.variance+t.variance)},r.prototype.scale=function(t){return n(this.mean*t,this.variance*t*t)};var n=function(t,e){return new r(t,e)},s=function(t,e){return n(e/t,1/t)};t(n)}(void 0!==r?function(t){e.exports=t}:function(t){this.gaussian=t})},{}],2:[function(t){Array.prototype.stanDeviate=function(){var t,e=[];for(t=0;t<this.length;t+=1)e.push(Math.pow(this[t]-this.mean(),2));return Math.sqrt(e.reduce(function(t,e){return t+e})/this.length)},Array.prototype.mean=function(){return this.sum()/this.length},Array.prototype.sum=function(){var t,e=0;for(t=0;t<this.length;t+=1)this[t]&&(e+=Number(this[t]));return e},Array.prototype.shuffle=function(){for(var t,e,r=this.length;0!==r;)e=Math.floor(Math.random()*r),t=this[r-=1],this[r]=this[e],this[e]=t;return this},Number.prototype.round=function(t){return Math.round(this*Math.pow(10,t))/Math.pow(10,t)},window.gaussian=t("gaussian"),window.Team=t("./team.js"),window.Match=t("./match.js"),window.Ranker=t("./ranker.js")},{"./match.js":3,"./ranker.js":4,"./team.js":5,gaussian:1}],3:[function(t,e){function a(t,e,r,n,s,i){this.week=t,this.a_team=e,this.b_team=r,this.a_points=Number(n),this.b_points=Number(s),this.status=i,this.computed=this.incomplete()}a.from_json=function(t,e){var r=e.week,n=Team.find_or_create(t,e.teams.team[0]),s=Team.find_or_create(t,e.teams.team[1]),i=new a(r,n,s,e.teams.team[0].team_points.total,e.teams.team[1].team_points.total,e.status);return n.matches[n.matches.length]=i,s.matches[s.matches.length]=i},a.prototype.complete=function(){return"postevent"===this.status},a.prototype.incomplete=function(){return!this.complete()},e.exports=a},{}],4:[function(t,e){function r(t,e){this.teams=[],this.load(e),this.iterations=0,this.iterate(t),this.h2h=!1}r.prototype.iterate=function(t){this.iterations+=t;for(var e=0;e<t;e++)this.compute(),this.standings(),this.reset()},r.prototype.load=function(t){for(var e in t)if(t[e])for(var r=t[e],n=0;n<r.length;n++)"0"===r[n].is_playoffs&&new Match.from_json(this.teams,r[n]);return this.teams},r.prototype.compute=function(){for(var t=1;t<this.teams.length;t++){var e=this.teams[t];if(e)for(var r=0;r<e.matches.length;r++){var n=e.matches[r];n.computed&&(n.a_team.id===e.id?n.a_points=e.fake_score():n.b_points=e.fake_score())}}},r.prototype.reset=function(){for(var t=1;t<this.teams.length;t++)this.teams[t]&&this.teams[t].reset()},r.prototype.standings=function(){var t=this.teams.slice(1),e=this.h2h?Team.headComparator:Team.comparator;t.sort(e);for(var r=0;r<t.length;r++)t[r]&&(t[r].ranks[r]=t[r].ranks[r]||0,t[r].ranks[r]+=1)},e.exports=r},{}],5:[function(t,e){function r(t,e,r){this.id=t,this.owner=e,this.name=r,this.matches=[],this.ranks=[],this.record={}}r.find_or_create=function(t,e){return t[e.team_id]||(t[e.team_id]=new r(e.team_id,e.managers.manager.nickname,e.name)),t[e.team_id]},r.prototype.my_score=function(t){return t.a_team.id===this.id?Number(t.a_points):Number(t.b_points)},r.prototype.real_scores=function(){var t,e,r,n,s;for(s=[],e=0,r=(n=this.real_matches()).length;e<r;e++)t=n[e],s.push(this.my_score(t));return s},r.prototype.real_matches=function(){var t,e,r,n,s;for(s=[],e=0,r=(n=this.matches).length;e<r;e++)(t=n[e]).computed||s.push(t);return s},r.prototype.fake_matches=function(){var t,e,r,n,s;for(s=[],e=0,r=(n=this.matches).length;e<r;e++)(t=n[e]).computed&&s.push(t);return s},r.prototype.head_matches=function(t){var e,r,n,s,i;for(i=[],r=0,n=(s=this.matches).length;r<n;r++)(e=s[r]).a_team!==t&&e.b_team!==t||i.push(e);return i},r.prototype.calc_stats=function(){this.cached_stats||(this.scores||(this.scores=this.real_scores()),this.mean||(this.mean=this.scores.mean()),this.max||(this.max=Math.max.apply(null,this.scores)),this.min||(this.min=Math.min.apply(null,this.scores)),this.stddev||(this.stddev=this.scores.stanDeviate()),this.stddev||(this.stddev=20),this.distribution||(this.distribution=window.gaussian(this.mean,this.stddev*this.stddev)),this.cached_stats=!0)},r.prototype.fake_score=function(){return this.calc_stats(),this.distribution.ppf(Math.random()).toFixed(2)},r.prototype.ties=function(){return this.records()[2]},r.prototype.losses=function(){return this.records()[1]},r.prototype.wins=function(){return this.records()[0]},r.prototype.real_win_loss=function(){var t=this.records(this.real_matches(),"real");return 0<t[2]?t[0]+"-"+t[1]+"-"+t[2]:t[0]+"-"+t[1]},r.prototype.records=function(t,e){var r,n,s,i,a,o,h,u,c;t=void 0!==t?t:this.matches,e=void 0!==e?e:"default";if(this.record[e])return this.record[e];for(u=a=s=h=0,c=t.length;u<c;u++)i=t[u],r=Number(i.a_points),n=Number(i.b_points),i.a_team.id!==this.id&&(o=r,r=n,n=o),n<r?h+=1:r<n?s+=1:a+=1;return this.record[e]=[h,s,a]},r.prototype.points_for=function(){var s;return function(){var t,e,r,n;for(n=[],t=0,e=(r=this.matches).length;t<e;t++)s=r[t],n.push(this.my_score(s));return n}.call(this).reduce(function(t,e){return t+e})},r.prototype.reset=function(){var t=this.fake_matches();this.record={};for(var e=0;e<t.length;e++)t[e].a_points=0,t[e].b_points=0},r.comparator=function(t,e){var r=t.wins()+.5*t.ties(),n=e.wins()+.5*e.ties();return r==n?t.points_for()>e.points_for()?-1:1:n<r?-1:1},r.prototype.h2hRecord=function(t){return this.records(this.head_matches(t),"head")},r.headComparator=function(t,e){var r=t.wins()+.5*t.ties(),n=e.wins()+.5*e.ties();if(r!=n)return n<r?-1:1;var s=t.h2hRecord(e);return games_ahead=s[0]-s[1],0<games_ahead?-1:games_ahead<0?1:t.points_for()>e.points_for()?-1:1},e.exports=r},{}]},{},[2]);